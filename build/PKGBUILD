pkgname=survey
pkgver=r21.f2a0b1c
pkgrel=1
pkgdesc="a basic/primitive survey app for LAN-based survey completion"
arch=('x86_64')
url="https://github.com/epiphyte/survey"
license=('MIT')
makedepends=('python' 'python-setuptools' 'curl')
source=("git+$url")
sha512sums=('SKIP')
_pkgdir="/opt/epiphyte/survey"

pkgver() {
    cd ${srcdir}/$pkgname
    printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

build() {
    cd ${srcdir}/$pkgname
    make dependencies
}

package() {
    cd ${srcdir}/$pkgname
    local pack=$pkgdir/$_pkgdir
    for f in $(find static/* -type f -print | grep -v ".git"); do
        install -Dm644 $f $pack/$f
    done
}
